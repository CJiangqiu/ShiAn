expert_id: kitchen_fire
description: 厨房火焰与烟雾风险识别

# 规则引擎配置
detection_mode: 1
primary_object:
  - fire
  - smoke

# 区域约束（用户需选择安全区域）
zone:
  required: true
  zone_name: safe_zone

# 规则：烟雾/火焰出现 + 附近无人 + 持续时间
alert_rules:
  unattended_fire_in_safe_zone:
    desc: 安全区域内火焰/烟雾无人看管
    condition: "NOT nearby(SELF, person, 120) AND in_zone(SELF, safe_zone)"
    min_duration: 3.0
    severity: high
    need_vlm_confirm: true
    threshold: 0.6

  unattended_fire_outside_safe_zone:
    desc: 非安全区域出现火焰/烟雾且无人处理
    condition: "NOT nearby(SELF, person, 120) AND NOT in_zone(SELF, safe_zone)"
    min_duration: 3.0
    severity: critical
    need_vlm_confirm: true
    threshold: 0.6

  large_fire:
    desc: 检测到大面积火焰（可能失控）
    condition: "area(SELF) > 50000"
    min_duration: 2.0
    severity: critical
    need_vlm_confirm: true
    threshold: 0.7

vlm_prompt_template: |
  场景：厨房安全监控
  目标：画面中红框标记的火焰或烟雾

  判断标准：
  1. 火焰是否超出灶台/锅具范围（失控蔓延）？
  2. 火焰面积是否在持续增大？
  3. 烟雾颜色是否异常（深灰/黑色表示固体燃烧）？
  4. 附近是否有人在处理？

  区分正常烹饪 vs 危险火灾：
  - 正常：火焰在灶具范围内、面积稳定、白色油烟向上排出
  - 危险：火焰蔓延到灶具外、面积持续增大、深色浓烟横向扩散

  输出格式：
  第一行：DANGER 或 SAFE
  第二行：简短理由（说明判断依据）

alert_behavior:
  min_danger_duration: 5.0
  cooldown_period: 30.0
